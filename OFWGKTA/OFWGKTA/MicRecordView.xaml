<UserControl x:Class="OFWGKTA.MicRecordView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:blah="clr-namespace:Microsoft.Research.Kinect.Nui;assembly=Microsoft.Research.Kinect"
        xmlns:my="clr-namespace:OFWGKTA"
        Height="480" Width="640">
        <UserControl.Resources>

    </UserControl.Resources>
    <Grid Background="Black">
        <ContentControl Content="{Binding Kinect}" ContentTemplate="{StaticResource SkeletonTemplate}"/>
        <my:WaveFileTrimmerControl Margin="5,27,5,230" 
                SampleAggregator="{Binding SampleAggregator}"                                    
                TotalWaveFormSamples="{Binding TotalWaveFormSamples}"
                LeftSelection="{Binding LeftPosition, Mode=TwoWay}"
                RightSelection="{Binding RightPosition, Mode=TwoWay}" Loaded="WaveFileTrimmerControl_Loaded" />
        
        <ProgressBar Margin="29,0,584,64" Orientation="Vertical" Value="{Binding CurrentInputLevel, Mode=OneWay}" Height="101" VerticalAlignment="Bottom" />

        <Slider Margin="62,315,543,64" Orientation="Vertical" Value="{Binding MicrophoneLevel, Mode=TwoWay}" Maximum="100" />

        <TextBlock Margin="529,306,33,146" Text="{Binding RecordedTime}" FontWeight="Bold" FontSize="16" Foreground="White" />
        <Button Content="Start Recording" Command="{Binding BeginRecordingCommand}" ToolTip="Start Recording" Margin="378,457,139,0" />
        <Button Content="Stop Recording" Command="{Binding StopCommand}" ToolTip="Stop Recording" Margin="505,457,12,0" />
        <Label Content="Mic Level:" Height="28" Margin="29,272,548,0" VerticalAlignment="Top" Foreground="White" />
        <Button Command="{Binding RewindCommand}" Content="Rewind" Margin="120,457,397,0" ToolTip="Start Recording" />
        <Button Command="{Binding PlaybackCommand}" Content="Playback" Margin="0,457,268,0" ToolTip="Start Recording" HorizontalAlignment="Right" Width="123" />


        <Button Content="Back" Height="23" HorizontalAlignment="Left" Margin="12,457,0,0" Name="back_button" Command="{Binding GoBackCommand}" VerticalAlignment="Top" Width="75" />
        
        <Label Margin="529,272,27,0" Height="28" VerticalAlignment="Top" Foreground="White">Elapsed Time:</Label>
        <Rectangle Height="67" Width="320" HorizontalAlignment="Center" VerticalAlignment="Bottom" Name="rectangle1" Margin="159,0,161,27" FlowDirection="LeftToRight" Panel.ZIndex="-1" Stroke="#00000000">
            <Rectangle.Fill>
                <RadialGradientBrush>
                    <GradientStop Color="{Binding Path=Kinect.IsOnStage, Converter={StaticResource StageHighlight}}" Offset="0.22"/>
                    <GradientStop Color="Black" Offset="0.703" />
                </RadialGradientBrush>
            </Rectangle.Fill>
        </Rectangle>
        <ItemsControl Margin="0,-87,0,486">
            <ItemsControl.Style>
                <Style>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding Path=MenuRecognizerHoriz.MenuEnabled}" Value="True">
                            <DataTrigger.EnterActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <ThicknessAnimation Storyboard.TargetProperty="Margin" From="0,-87,0,486" To="0,41,0,374" Duration="0:0:1" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </DataTrigger.EnterActions>
                            <DataTrigger.ExitActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <ThicknessAnimation Storyboard.TargetProperty="Margin" From="0,41,0,374" To="0,-87,0,486" Duration="0:0:1" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </DataTrigger.ExitActions>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </ItemsControl.Style>
            <ListBox ItemsSource="{Binding MenuListHoriz}" SelectedIndex="{Binding Path=MenuRecognizerHoriz.HoverIndex, Mode=OneWay}" ItemTemplate="{StaticResource MicMenuItemsHoriz}" Background="#CCFFFFFF">
                <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel Orientation="Horizontal"/>
                    </ItemsPanelTemplate>
                </ListBox.ItemsPanel>
            </ListBox>
        </ItemsControl>
        <ItemsControl Margin="646,62,-177,70">
            <ItemsControl.Style>
                <Style>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding Path=MenuRecognizerVert.MenuEnabled}" Value="True">
                            <DataTrigger.EnterActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <ThicknessAnimation Storyboard.TargetProperty="Margin" From="646,62,-177,70" To="471,62,0,70" Duration="0:0:1" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </DataTrigger.EnterActions>
                            <DataTrigger.ExitActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <ThicknessAnimation Storyboard.TargetProperty="Margin" From="471,62,0,70" To="646,62,-177,70" Duration="0:0:1" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </DataTrigger.ExitActions>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </ItemsControl.Style>
            <ListBox ItemsSource="{Binding MenuListHoriz}" SelectedIndex="{Binding Path=MenuRecognizerVert.HoverIndex, Mode=OneWay}" ItemTemplate="{StaticResource MicMenuItemsVert}" Background="#CCFFFFFF" HorizontalContentAlignment="Stretch">
            </ListBox>
        </ItemsControl>
        <TextBlock Text="{Binding Path=MenuRecognizer.HoverIndex}" Background="White" Padding="5,0,4,5" FontSize="30" Height="48" HorizontalAlignment="Left" Margin="592,405,0,0" Name="textBlock1" VerticalAlignment="Top" Width="36" />
    </Grid>
</UserControl>
